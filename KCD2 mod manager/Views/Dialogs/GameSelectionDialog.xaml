<Window x:Class="KCD2_mod_manager.Views.Dialogs.GameSelectionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:KCD2_mod_manager.ViewModels"
        xmlns:local="clr-namespace:KCD2_mod_manager"
        xmlns:services="clr-namespace:KCD2_mod_manager.Services"
        Title="{Binding SelectGameTitle}" Height="260" MinHeight="260" Width="440" MinWidth="440"
        Background="{DynamicResource WindowBackgroundBrush}"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Topmost="True"
        ShowInTaskbar="True">
    <Window.Resources>
        <!-- Converter für GameType-Vergleich -->
        <local:GameTypeEqualsConverter x:Key="GameTypeEqualsConverter"/>
        
        <!-- Sicherstellen, dass Foreground für Text-Elemente gesetzt ist -->
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource ListBoxForegroundBrush}"/>
        </Style>
        <Style TargetType="RadioButton">
            <Setter Property="Foreground" Value="{DynamicResource ListBoxForegroundBrush}"/>
        </Style>
        <!-- Button-Style aus App.xaml verwenden -->
        <Style TargetType="Button" BasedOn="{StaticResource SecondaryButtonStyle}"/>
    </Window.Resources>
    <!-- WICHTIG: Verbesserte Layout-Struktur für bessere Lesbarkeit und keine Überlappungen -->
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Message -->
        <TextBlock Grid.Row="0" 
                   Text="{Binding SelectGameMessage}" 
                   FontSize="14" 
                   Margin="0,0,0,20"
                   TextWrapping="Wrap"
                   Foreground="{DynamicResource ListBoxForegroundBrush}" />

        <!-- KCD1 RadioButton -->
        <RadioButton x:Name="KCD1Radio" 
                     Grid.Row="1" 
                     Content="{Binding KCD1DisplayName}"
                     IsEnabled="{Binding HasKCD1}"
                     IsChecked="{Binding SelectedGame, Converter={StaticResource GameTypeEqualsConverter}, ConverterParameter={x:Static services:GameType.KCD1}, Mode=TwoWay}"
                     Margin="0,0,0,15"
                     Padding="5,8,0,8"
                     VerticalAlignment="Center"
                     VerticalContentAlignment="Center"
                     Foreground="{DynamicResource ListBoxForegroundBrush}" />

        <!-- KCD2 RadioButton -->
        <RadioButton x:Name="KCD2Radio" 
                     Grid.Row="2"
                     Content="{Binding KCD2DisplayName}"
                     IsEnabled="{Binding HasKCD2}"
                     IsChecked="{Binding SelectedGame, Converter={StaticResource GameTypeEqualsConverter}, ConverterParameter={x:Static services:GameType.KCD2}, Mode=TwoWay}"
                     Margin="0,0,0,20"
                     Padding="5,8,0,8"
                     VerticalAlignment="Center"
                     VerticalContentAlignment="Center"
                     Foreground="{DynamicResource ListBoxForegroundBrush}" />

        <!-- Spacer -->
        <Grid Grid.Row="3"/>

        <!-- Buttons -->
        <StackPanel Grid.Row="4" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Margin="0,10,0,0">
            <Button Content="{Binding OkButtonText}" 
                    Width="80" 
                    Height="30" 
                    Margin="0,0,10,0" 
                    Click="OkButton_Click" 
                    IsDefault="True"
                    Style="{StaticResource SecondaryButtonStyle}" />
            <Button Content="{Binding CancelButtonText}" 
                    Width="80" 
                    Height="30" 
                    Click="CancelButton_Click" 
                    IsCancel="True"
                    Style="{StaticResource SecondaryButtonStyle}" />
        </StackPanel>
    </Grid>
</Window>

